# PRD: 앱 레벨 접근 제어 (App-Level Access Control)
**평가 전용 모드를 통한 대표/임원의 선택적 채용 참여 지원**

---

## 문서 정보

| 항목 | 내용 |
|------|------|
| 작성일 | 2026-01-09 |
| 작성자 | PM Team |
| 버전 | v1.0.0 |
| 상태 | Draft |
| 타겟 릴리스 | 2026 Q1 |
| 구현 예상 기간 | 2주 (MVP) |

---

## 1. 문제 정의 (Problem Statement)

### 1.1 JTBD (Job-to-be-Done)

> **"대표 또는 최종 의사결정권자는 모든 채용 공고에 대해 민감 정보 열람 및 평가 권한을 가지고 싶지만, 지원자 등록/평가 완료/자료 제출 등 오퍼레이션 알림이나 업무에는 관여하고 싶지 않다."**

**핵심 니즈:**
- **"보고 싶은 것만 본다"**: 지원자 프로필, 평가 결과, 면접 기록은 전부 확인 가능
- **"하고 싶지 않은 것은 안 한다"**: 지원자 등록, 단계 이동, 일정 조율, 메시지 발송 등 운영 업무 차단
- **"받고 싶지 않은 것은 안 받는다"**: "평가 완료됨", "과제 제출됨", "지원자 추가됨" 등 운영 알림 차단

### 1.2 현재 Pain Points

**Pain Point 1: 역할 부여의 딜레마**
- **면접관 권한 부여 시**: 대표가 평가 요청받은 지원자만 볼 수 있음. 다른 공고의 지원자나 민감 정보에 접근 불가. 실시간으로 전사 채용 현황을 파악하기 어려움.
- **매니저/관리자 권한 부여 시**: 하루에 수십 개의 오퍼레이션 알림(평가 완료, 과제 제출, 면접 확정, 지원자 추가 등)을 받게 됨. 의사결정에 필요하지 않은 잡음(Noise)에 압도됨.

**Pain Point 2: HR 담당자의 부담**
- 대표에게 Admin 권한을 주면 지원자 삭제, 공고 수정, 프로세스 변경 등 민감한 오퍼레이션을 실수로 수행할 위험이 있음.
- "대표님이 실수로 지원자를 삭제하셨어요"와 같은 CS 사고 발생 우려.

**Pain Point 3: 빈번한 수동 필터링**
- 대표가 round-app에 접근해서 채용 대시보드, 지원자 리스트, 공고 설정 등 복잡한 UI를 보게 됨.
- "저는 평가만 하고 싶은데 버튼이 너무 많아요"라는 혼란 발생.

### 1.3 Target Persona

**Primary: 대표 / C-Level 임원**
- 역할: 최종 의사결정권자, 회사 비전 수립, 주요 인력 채용 승인
- 채용 관여 수준: 주 1-2회 면접 참여, 최종 합격 승인, 주요 인재 프로필 열람
- 기술 숙련도: 중간 (복잡한 관리 UI를 학습할 시간 없음)
- 핵심 불만: "알림이 너무 많아서 중요한 정보를 놓친다", "채용 시스템이 복잡해서 쓰기 싫다"

**Secondary: 채용 담당자 (HR Manager / Recruiting Lead)**
- 역할: 채용 프로세스 설계, 지원자 소싱, 면접 일정 조율, 합격 처리
- 니즈: 대표가 채용에 참여하지만, 실수로 데이터를 삭제하거나 설정을 변경하지 않길 원함
- 불안: "대표님이 실수로 공고를 비활성화하면 어떡하지?"

**Edge Case: 외부 고문 / 자문단**
- 회사 외부 인사이지만 특정 직무(CTO, 마케팅 임원 등)의 면접에만 참여
- 니즈: 채용 시스템의 운영 기능은 전혀 필요 없고, 평가만 작성할 수 있으면 충분

### 1.4 비즈니스 임팩트

**정성적 임팩트:**
- **브랜드 이미지**: "라운드는 대표님도 쉽게 쓸 수 있는 ATS"라는 포지셔닝 강화
- **엔터프라이즈 레디**: 복잡한 조직 구조와 역할 분리가 필요한 중견기업 진출 기반 마련
- **제품 차별화**: Ashby(자동화), 그리팅(커스텀 역할)과 달리 **"역할은 그대로, 접근 앱만 제한"**하는 라운드만의 접근법

---

## 2. 솔루션 개요 (Solution Overview)

### 2.1 기능 요약 (한 문장)

> **"Admin 또는 Manager 권한을 가진 사용자가 '평가 전용 모드'를 활성화하면, round-member(평가 전용 앱)에만 접근 가능하고 round-app(채용 관리 앱)은 자동 차단됩니다."**

### 2.2 작동 방식 (사용자 관점)

**설정자 (HR Manager):**
1. 조직 설정 > 멤버 관리 > [계정] 선택
2. 역할: "Admin" 또는 "Manager" 유지
3. "평가 전용 모드" 체크박스 활성화 → 저장
4. 대표는 이제 round-member로만 로그인되며, 모든 공고의 지원자를 열람하고 평가 작성 가능. 단, round-app 접근 차단.

**사용자 (CEO):**
1. 라운드 로그인
2. 자동으로 round-member로 리다이렉트 (round-app URL 접근 시도 시에도 자동 리다이렉트)
3. 평가 화면에서 모든 공고의 지원자 프로필 열람, 평가 작성, 면접 평가 참여
4. 채용 관리 기능(지원자 등록, 메시지 발송, 공고 수정 등)은 UI에 노출되지 않음
5. 오퍼레이션 알림(평가 완료, 과제 제출 등) 수신 안 함

### 2.3 Before/After 비교

| 측면 | Before (현재) | After (평가 전용 모드) |
|------|--------------|---------------------|
| **권한 부여** | 면접관(제한적) 또는 Admin(과도함) 중 양극단 선택 | Admin 권한 + 평가 전용 모드 = 균형잡힌 접근 |
| **접근 가능 페이지** | round-app 전체 (혼란스러운 UI) | round-member만 (간결한 평가 중심 UI) |
| **알림** | 하루 20+ 오퍼레이션 알림 | 의사결정 관련 알림만 (또는 알림 없음) |
| **실수 위험** | 지원자 삭제, 공고 비활성화 가능 | 읽기 전용 평가 중심 환경, 운영 기능 차단 |
| **UX 만족도** | "복잡하고 알림이 많아서 쓰기 싫다" | "필요한 정보만 보고 평가만 하니 편하다" |

---

## 3. 사용자 스토리 (User Stories)

### 3.1 대표 (CEO / Founder)

**US-1: 전사 채용 현황 파악**
- **As a** 대표
- **I want to** 모든 공고의 지원자를 열람하고 평가 내용을 확인하고 싶다
- **So that** 회사의 채용 품질과 진행 상황을 실시간으로 모니터링할 수 있다
- **Acceptance Criteria:**
  - round-member 로그인 시 전체 공고 리스트 표시됨
  - 각 공고의 지원자 프로필, 이력서, 평가 결과 열람 가능
  - 민감 정보(연봉, 평가 점수 등) 모두 표시됨 (Admin 권한 기반)

**US-2: 운영 업무 차단**
- **As a** 대표
- **I want to** 지원자 등록, 단계 이동, 메시지 발송 등 운영 기능에 접근하지 않길 원한다
- **So that** 실수로 데이터를 변경하거나 채용 프로세스를 방해하지 않는다
- **Acceptance Criteria:**
  - round-app URL 접근 시 round-member로 자동 리다이렉트
  - 리다이렉트 시 토스트 메시지 표시: "평가 전용 모드로 설정되어 있습니다. 변경을 원하시면 관리자에게 문의하세요."
  - round-member 내에서 "채용 관리로 이동" 버튼 비활성화 또는 숨김 처리

**US-3: 알림 최소화**
- **As a** 대표
- **I want to** 오퍼레이션 알림(평가 완료, 과제 제출 등)을 받지 않고 싶다
- **So that** 중요한 의사결정 관련 정보에만 집중할 수 있다
- **Acceptance Criteria:**
  - 평가 전용 모드 사용자는 다음 알림을 수신하지 않음:
    - 지원자 추가됨
    - 평가 완료됨
    - 과제 제출됨
    - 면접 일정 확정됨 (본인이 참여하는 면접 제외)
  - 수신하는 알림 (선택사항 - Phase 2):
    - 본인이 평가 요청 받음
    - 본인이 참여하는 면접 시작 30분 전

### 3.2 채용 담당자 (HR Manager)

**US-4: 안전한 권한 부여**
- **As a** 채용 담당자
- **I want to** 대표에게 전체 정보 접근 권한은 주되, 실수로 데이터를 변경할 위험은 없길 원한다
- **So that** 대표가 안심하고 채용 시스템을 활용하면서도 채용 프로세스의 무결성이 유지된다
- **Acceptance Criteria:**
  - 조직 설정 > 멤버 관리에서 "평가 전용 모드" 체크박스 표시
  - 체크박스는 역할이 Admin 또는 Manager일 때만 활성화됨
  - 변경 사항은 즉시 적용되며 감사 로그에 기록됨

**US-5: 변경 이력 추적**
- **As a** 채용 담당자
- **I want to** 누가 언제 평가 전용 모드를 활성화/비활성화했는지 확인하고 싶다
- **So that** 권한 변경에 대한 감사 추적(Audit Trail)이 가능하다
- **Acceptance Criteria:**
  - 감사 로그에 다음 정보 기록:
    - 변경 일시
    - 변경자 (예: HR 담당자 김철수)
    - 대상자 (예: CEO 홍길동)
    - 변경 내용 (예: app_access_control: 'full' → 'member_only')
  - 로그는 멤버 상세 페이지에서 "변경 이력 보기" 버튼으로 조회 가능

---

## 4. 기능 명세 (Functional Requirements)

### 4.1 설정 기능

#### 4.1.1 UI 위치 및 레이아웃

**위치:** 조직 설정 > 멤버 관리 > [특정 멤버 선택] > 권한 탭

**UI 구조:**

```
┌─────────────────────────────────────────────────┐
│ 멤버 상세: 홍길동 (ceo@company.com)               │
└─────────────────────────────────────────────────┘

[기본 정보] [권한] [활동 이력]

┌─────────────────────────────────────────────────┐
│ 권한 설정                                         │
│                                                   │
│ 조직 권한                                         │
│ [Admin ▼]                                         │
│                                                   │
│ ☐ 평가 전용 모드                                  │
│   채용 관리 기능은 차단되고, 평가 화면만 접근      │
│   가능합니다.                                     │
│                                                   │
│ [변경 이력 보기]                    [취소] [저장] │
└─────────────────────────────────────────────────┘
```

#### 4.1.2 상세 스펙

| 항목 | 상세 |
|------|------|
| **체크박스 활성화 조건** | 역할이 Admin 또는 Manager일 때만 클릭 가능. User 역할일 경우 체크박스 비활성화(disabled) 및 툴팁 표시: "Admin 또는 Manager 권한이 필요합니다." |
| **기본값** | OFF (unchecked) |
| **변경 권한** | Owner, Admin (단, 본인 계정은 본인이 변경 불가 - 실수 방지) |
| **저장 확인 모달** | "홍길동님은 이제 평가 화면만 접근할 수 있습니다. 채용 관리 기능은 차단됩니다. 계속하시겠습니까?" [취소] [확인] |
| **즉시 적용** | 저장 즉시 사용자 세션에 반영. 현재 로그인된 사용자는 다음 페이지 이동 시 리다이렉트 적용. |


### 4.2 접근 제어 로직

#### 4.2.1 평가 전용 모드 ON 시

**허용되는 기능:**

| 기능 | 상세 |
|------|------|
| **round-member 로그인** | 전체 기능 사용 가능 |
| **모든 공고 열람** | Admin 권한 기반으로 워크스페이스 내 모든 공고 리스트 표시 |
| **지원자 프로필 열람** | 이력서, 포트폴리오, 평가 내역, 면접 기록 등 모든 정보 열람 (Admin 권한 기반, 민감 정보 포함) |
| **평가 작성** | 서류 평가, 면접 평가, 과제 평가 작성 및 제출 |
| **다른 면접관 작업 조회** | ?user_id 파라미터를 통해 다른 평가자의 평가 내역 조회 (Admin 권한 기반) |
| **본인 일정 관리** | 본인이 참여하는 면접 일정 조회 및 확정/거절 |

**차단되는 기능:**

| 기능 | 차단 방식 |
|------|----------|
| **round-app 접근** | URL 직접 입력 시에도 미들웨어 레벨에서 차단 후 round-member로 리다이렉트 |
| **round-app 전용 API 호출** | API 레벨에서 `appAccessControl` 필드 검증 후 403 Forbidden 응답 |
| **지원자 등록/수정/삭제** | round-member UI에서 해당 버튼 미노출 |
| **단계 이동** | 지원자 카드의 "단계 변경" 드롭다운 비활성화 |
| **메시지 발송** | "메일 보내기", "문자 보내기" 버튼 미노출 |
| **공고 수정/생성** | 공고 설정 페이지 접근 차단 |
| **채용 프로세스 수정** | 프로세스 편집 UI 접근 차단 |
| **오퍼레이션 알림 수신** | 알림 생성 로직에서 `appAccessControl === 'member_only'` 사용자 제외 |


## 5. UI/UX 설계

### 5.1 설정 화면 (조직 관리자용)

#### 5.1.1 멤버 관리 리스트

```
┌────────────────────────────────────────────────────────────────┐
│ 멤버 관리                                        [+ 멤버 초대]  │
├────────────────────────────────────────────────────────────────┤
│ 이름              이메일                 역할        접근 모드  │
├────────────────────────────────────────────────────────────────┤
│ 홍길동            ceo@company.com        Admin       평가 전용  │
│ 김철수            hr@company.com         Admin       전체       │
│ 이영희            recruiter@company.com  Manager     전체       │
│ 박민수            interviewer@...        User        N/A        │
└────────────────────────────────────────────────────────────────┘
```

**새로 추가된 컬럼: "접근 모드"**
- `full` → "전체" (회색 텍스트)
- `member_only` → "평가 전용" (주황색 배지)
- User 역할은 "N/A" 표시 (면접관은 애초에 round-member만 사용)

#### 5.1.2 멤버 상세 > 권한 탭

```
┌─────────────────────────────────────────────────────────────────┐
│ 멤버 상세: 홍길동 (ceo@company.com)                              │
└─────────────────────────────────────────────────────────────────┘

[기본 정보] [권한] [활동 이력]

┌─────────────────────────────────────────────────────────────────┐
│ 권한 설정                                                         │
│                                                                   │
│ 조직 권한                                                         │
│ [Admin ▼] [Owner / Admin / Manager / User 선택]                  │
│                                                                   │
│ ┌───────────────────────────────────────────────────────────┐   │
│ │ ☐ 평가 전용 모드                                           │   │
│ │                                                            │   │
│ │ 활성화 시:                                                  │   │
│ │ • 채용 관리 기능(지원자 등록, 공고 수정 등) 차단             │   │
│ │ • 평가 및 면접 기능만 사용 가능                             │   │
│ │ • 오퍼레이션 알림 수신 안 함                                │   │
│ │                                                            │   │
│ │ 💡 대표 또는 임원이 평가에만 참여하고 운영 업무는           │   │
│ │    채용 담당자가 전담하는 조직에 적합합니다.                │   │
│ └───────────────────────────────────────────────────────────┘   │
│                                                                   │
│                                                [취소] [저장]      │
└─────────────────────────────────────────────────────────────────┘
```

**인터랙션:**
1. 역할이 "User"일 경우 체크박스 비활성화(disabled) 및 툴팁:
   - "평가 전용 모드는 Admin 또는 Manager 역할에만 적용할 수 있습니다. User 역할은 기본적으로 평가 화면만 사용합니다."

2. [저장] 클릭 시 확인 모달:
   ```
   ┌───────────────────────────────────────────────┐
   │ 평가 전용 모드 활성화                          │
   ├───────────────────────────────────────────────┤
   │ 홍길동님은 이제 평가 화면만 접근할 수 있습니다. │
   │ 채용 관리 기능은 차단됩니다.                   │
   │                                               │
   │ 이 설정은 언제든지 변경할 수 있습니다.          │
   │                                               │
   │                           [취소] [확인]       │
   └───────────────────────────────────────────────┘
   ```

3. 저장 성공 시 토스트:
   - "홍길동님의 접근 모드가 '평가 전용'으로 변경되었습니다."

### 5.2 사용자 경험 (대표용)
#### 5.2.1 할 수 있는 것 (✅ Can Do)

| 시나리오 | 상세 |
|----------|------|
| **지원자 열람** | 모든 공고의 지원자 리스트를 조회하고, 개별 지원자의 이력서·포트폴리오·연봉 정보 등 민감 정보 포함 전체 내용 열람 |
| **평가 작성** | 서류 평가, 면접 평가, 과제 평가 등 모든 평가 유형에 점수와 코멘트 작성 |
| **평가 내역 조회** | 본인 및 다른 평가자가 작성한 모든 평가 내역 확인 |
| **면접 일정 확인** | 본인이 면접관으로 배정된 면접 일정 확인 (캘린더, 리스트 뷰) |
| **지원자 상태 확인** | 지원자의 현재 채용 단계(서류→1차→2차→최종) 및 합격/불합격 여부 확인 |
| **통계 대시보드 조회** | 채용 현황 대시보드, 공고별 지원자 수, 단계별 전환율 등 통계 데이터 열람 |
| **평가 요청 알림 수신** | 본인에게 평가 요청이 들어왔을 때 알림 수신 (이 알림은 차단되지 않음) |

**예시 시나리오: 대표가 임원 채용 후보를 평가할 때**
```
1. round-member 접속 → [평가] 탭 클릭
2. "CTO 채용" 공고의 최종 후보 3명 리스트 확인
3. 후보 A 클릭 → 이력서, 연봉 정보, 1차/2차 면접 평가 내역 열람
4. [평가 작성] 클릭 → 최종 면접 평가 점수 및 코멘트 입력
5. 저장 → 완료
```

#### 5.2.2 할 수 없는 것 (❌ Cannot Do)

| 시나리오 | 상세 | 시도 시 결과 |
|----------|------|--------------|
| **지원자 등록** | 신규 지원자 수동 등록, 이력서 업로드 | round-app 리다이렉트 → 토스트 안내 |
| **지원자 정보 수정** | 지원자 연락처, 이력서 변경, 태그 추가 | 수정 버튼 미표시 |
| **지원자 삭제** | 지원자 데이터 삭제 | 삭제 버튼 미표시 |
| **단계 이동** | 지원자를 다음 채용 단계로 이동 (예: 서류→1차) | 이동 버튼 미표시 |
| **합격/불합격 처리** | 최종 합격 또는 불합격 처리 | 처리 버튼 미표시 |
| **공고 생성/수정** | 새 공고 작성, 기존 공고 내용 수정, 마감일 변경 | round-app 리다이렉트 |
| **메시지 발송** | 지원자에게 메일/문자 발송 | 발송 버튼 미표시 |
| **면접 일정 생성** | 새 면접 일정 생성 및 면접관 배정 | round-app 리다이렉트 |
| **채용 설정 변경** | 채용 단계 수정, 평가 양식 변경, 자동화 규칙 설정 | round-app 리다이렉트 |
| **멤버 권한 관리** | 다른 멤버의 권한 변경, 초대 | round-app 리다이렉트 |
| **오퍼레이션 알림 수신** | 지원자 등록, 평가 완료, 메시지 발송 결과 등 운영 알림 | 알림 자동 필터링 (수신 안 함) |

**예시 시나리오: 대표가 합격 처리를 시도할 때**
```
1. round-member에서 최종 후보 상세 페이지 접속
2. "합격 처리" 버튼이 화면에 표시되지 않음
3. HR 담당자(김철수)에게 슬랙으로 "후보 A 합격 처리 부탁드립니다" 요청
4. HR 담당자가 round-app에서 합격 처리 완료
```

---

## 6. 출시 계획 (Release Plan)

### 6.1 Phase 1: MVP (2주)

**목표:** 핵심 기능 구현 및 내부 테스트

| 주차 | 작업 항목 | 담당 | 산출물 |
|------|----------|------|--------|
| **Week 1** | **백엔드 개발** | Backend Team | |
| | - `users` 테이블 `app_access_control` 컬럼 추가 | | DB 마이그레이션 스크립트 |
| | - `checkAppAccess` 미들웨어 구현 | | `middleware/checkAppAccess.ts` |
| | - 리다이렉트 로직 구현 및 테스트 | | Unit Test 커버리지 > 80% |
| | - 알림 로직 수정 (평가 전용 모드 사용자 제외) | | `services/notification.ts` 수정 |
| | - 감사 로그 기록 로직 추가 | | `audit_logs` 테이블 쿼리 |
| **Week 1-2** | **프론트엔드 개발** | Frontend Team | |
| | - 설정 UI 구현 (멤버 관리 > 권한 탭) | | `pages/MemberDetail.tsx` |
| | - "평가 전용 모드" 체크박스 및 확인 모달 | | `components/AppAccessControl.tsx` |
| | - 리다이렉트 토스트 메시지 구현 | | `pages/Worktask.tsx` 수정 |
| | - "채용 관리로 이동" 버튼 조건부 렌더링 | | `components/Header.tsx` 수정 |
| | - "내 권한 보기" 모달 구현 | | `components/MyPermissionsModal.tsx` |
| **Week 2** | **QA 및 버그 수정** | QA Team | |
| | - 주요 시나리오 테스트 (후술) | | 테스트 시나리오 체크리스트 |
| | - 크로스 브라우저 테스트 (Chrome, Safari, Edge) | | 버그 리포트 |
| | - API 보안 테스트 (Postman으로 우회 시도) | | 보안 테스트 리포트 |
| **Week 2 말** | **내부 데모** | PM + 전체 팀 | 피드백 문서 |

**주요 시나리오 테스트 체크리스트:**
- [ ] Admin 권한 사용자에게 평가 전용 모드 활성화 → round-app 접근 차단 확인
- [ ] round-app URL 직접 입력 시 round-member로 리다이렉트 확인
- [ ] 리다이렉트 시 토스트 메시지 표시 확인
- [ ] round-member에서 모든 공고 및 지원자 열람 가능 확인
- [ ] "채용 관리로 이동" 버튼이 평가 전용 모드 사용자에게 미노출 확인
- [ ] 평가 작성 기능 정상 작동 확인
- [ ] 알림 미수신 확인 (지원자 추가, 평가 완료 등 오퍼레이션 알림)
- [ ] 감사 로그 기록 확인 (활성화/비활성화 이력)
- [ ] User 역할에게는 체크박스 비활성화 확인
- [ ] 본인이 본인의 평가 전용 모드 설정 변경 시도 차단 확인

---

## 7. 리스크 및 완화 방안

### 7.1 제품 리스크

| 리스크 | 확률 | 영향 | 완화 방안 | 책임자 |
|--------|------|------|----------|--------|
| **JTBD 미충족: 대표가 여전히 "필요한 알림"까지 못 받는다고 불만** | 중간 | 높음 | - 베타 테스트에서 알림 수신 패턴 면밀히 관찰<br>- Phase 1.5에서 "선택적 알림 설정" 기능 추가 검토 (예: "최종 합격 처리 시에만 알림 받기")<br>- 최악의 경우 "알림 설정"과 "앱 접근 제어"를 분리하는 구조로 재설계 | PM |
| **사용자 혼란: "왜 버튼이 안 보이죠?" 문의 증가** | 중간 | 중간 | - 첫 로그인 시 안내 배너 및 "내 권한 보기" 기능 제공<br>- 도움말 센터에 FAQ 추가: "평가 전용 모드에서 할 수 없는 작업"<br>- CS팀에게 사전 교육 제공 (응답 템플릿 준비) | PM + CS팀 |
| **긴급 상황 대응 불가: HR 담당자 퇴사 시 대표가 채용 관리 불가** | 낮음 | 중간 | - Owner 역할은 평가 전용 모드 설정 불가하도록 제한 (최소 1명은 항상 Full Access 보장)<br>- 다른 Admin이 즉시 평가 전용 모드 해제 가능 | PM |
| **경쟁사 대비 차별화 부족: Ashby의 자동화나 그리팅의 커스텀 역할에 비해 단순해 보임** | 낮음 | 중간 | - 마케팅에서 "가장 빠르고 간단한 설정"을 강조<br>- 장기적으로 Phase 3에서 자동화 규칙 엔진 추가 검토 | PM + 마케팅팀 |

### 7.2 기술 리스크

| 리스크 | 확률 | 영향 | 완화 방안 | 책임자 |
|--------|------|------|----------|--------|
| **기술 부채 누적: 향후 권한 시스템 재설계 시 마이그레이션 복잡도 증가** | 높음 | 낮음 | - `app_access_control` 필드는 독립적으로 설계되어 기존 `role` 시스템과 분리됨<br>- 향후 RBAC 재설계 시 `app_access_control`을 새 시스템의 "접근 범위(Scope)" 개념으로 매핑 가능<br>- 마이그레이션 계획을 Phase 3 로드맵에 포함 | Tech Lead |
| **세션 캐싱 오류: 권한 변경 후 즉시 반영 안 됨** | 중간 | 중간 | - 권한 변경 시 Redis 캐시 무효화(Invalidation) 로직 추가<br>- 사용자 세션에 TTL 설정 (1시간) 및 페이지 이동 시 권한 재확인 | Backend Team |
| **리다이렉트 루프: 특정 조건에서 무한 리다이렉트 발생** | 낮음 | 높음 | - 미들웨어에서 리다이렉트 카운터 추가 (3회 이상 시 에러 페이지)<br>- QA 단계에서 엣지 케이스 테스트 (예: 세션 만료 직후 접근) | Backend Team |
| **API 우회 공격: 개발자 도구로 round-app API 직접 호출** | 낮음 | 높음 | - 모든 round-app API 엔드포인트에 `appAccessControl` 검증 미들웨어 적용<br>- 보안 테스트 단계에서 Postman으로 우회 시도 검증 | Security Team |

### 7.3 비즈니스 리스크

| 리스크 | 확률 | 영향 | 완화 방안 | 책임자 |
|--------|------|------|----------|--------|
| **영업 기회 손실: 기능이 단순해서 엔터프라이즈 고객 유치 실패** | 중간 | 중간 | - 영업 자료에 "Phase 2/3 로드맵" 포함 (공고별 접근 제한, 자동화 규칙 등)<br>- 베타 고객 성공 사례를 Case Study로 제작하여 영업 도구화 | 영업팀 + PM |
| **매출 영향 없음: 이 기능이 계약 전환에 기여하지 않음** | 중간 | 낮음 | - 영업 파이프라인에서 "대표 권한" 관련 문의가 있는 리드에게 우선 소개<br>- 6개월 후 계약 전환율 데이터 분석 후 Go/Kill 결정 | PM + 영업팀 |

---

## 8. 의존성 및 제약사항

### 8.1 기술적 의존성

| 항목 | 상세 |
|------|------|
| **기존 2개 앱 구조** | round-app과 round-member가 이미 분리되어 있어야 함 (현재 라운드 아키텍처 확인 필요) |
| **세션 관리 시스템** | 사용자 로그인 시 `appAccessControl` 정보를 세션 또는 JWT에 포함시킬 수 있어야 함 |
| **Redis 캐싱** | 권한 정보 캐싱을 위해 Redis 또는 유사 인메모리 캐시 사용 가능해야 함 |
| **감사 로그 인프라** | 기존 `audit_logs` 테이블 또는 로깅 시스템 활용 (신규 구축 불필요) |

### 10.2 비즈니스 제약사항

| 항목 | 상세 |
|------|------|
| **베타 고객 확보** | 대표가 활성 사용자인 조직 3-5개사 협조 필요 (영업팀과 사전 협의) |
| **CS 팀 교육** | 정식 출시 전 CS 팀에게 신기능 교육 및 FAQ 제공 (1시간 세션) |
| **마케팅 리소스** | 릴리스 노트, 이메일, 영상 가이드 제작을 위한 마케팅 팀 리소스 확보 필요 (2-3일) |

### 10.3 범위 제외 (Out of Scope)

| 항목 | 이유 |
|------|------|
| **공고별 접근 제어** | MVP 범위 초과, Phase 2에서 검토 |
| **알림 세부 설정** | MVP는 알림 전체 차단, Phase 1.5에서 선택적 수신 검토 |
| **필드 레벨 보안** | 장기 과제, Phase 3에서 구현 |
| **모바일 앱 지원** | 웹 버전 안정화 후 모바일 대응 (별도 이니셔티브) |

---

## 9. 의사결정 기록 (Decision Log)

### 13.1 왜 옵션 3을 선택했나?

**결정 일자:** 2026-01-09
**결정자:** PM (최종 확인)

**고려한 옵션:**
1. **옵션 1: 알림 설정 개선** (알림만 선택적으로 끄기)
   - 장점: 구현 간단 (1주)
   - 단점: JTBD 미충족 (대표가 여전히 round-app에 접근 가능하여 실수 위험)

2. **옵션 2: 커스텀 역할 빌더** (그리팅 방식)
   - 장점: 유연성 최대, 엔터프라이즈급 기능
   - 단점: 구현 복잡 (4-6주), 사용자 혼란 가능성

3. **옵션 3: 앱 레벨 접근 제어** (본 PRD)
   - 장점: JTBD 완벽 충족, 구현 빠름 (1-2주), UX 단순
   - 단점: 엔터프라이즈 확장성 제한 (장기 로드맵 필요)

**선택 이유:**
- **빠른 출시**: 2주 내 MVP 가능, 시장 검증 빠름
- **명확한 JTBD 충족**: 대표가 평가만 하고 운영은 안 하는 니즈 정확히 해결
- **기존 아키텍처 활용**: round-app/member 분리 구조를 그대로 사용하여 기술 부채 최소화
- **점진적 확장 가능**: Phase 2/3에서 자동화, 커스텀 역할 추가 가능

### 13.2 주요 설계 결정

| 질문 | 결정 | 이유 |
|------|------|------|
| **알림도 함께 차단할 것인가?** | 예, 오퍼레이션 알림 전체 차단 | JTBD의 핵심 ("알림이 너무 많다") 해결 |
| **User 역할에도 적용할 것인가?** | 아니오, Admin/Manager만 | User는 이미 평가 전용이므로 중복 |
| **본인이 본인 권한 변경 가능한가?** | 아니오, 다른 Admin만 가능 | 실수 방지 (대표가 잘못 클릭하여 차단되는 상황 방지) |
| **리다이렉트 시 에러 페이지 vs 자동 이동?** | 자동 이동 (리다이렉트) | 사용자 경험 최소 마찰 |

---

## 10. 부록 (Appendix)

### 14.1 용어 정의

| 용어 | 정의 |
|------|------|
| **round-app** | 채용 관리 전용 웹 애플리케이션 (지원자 등록, 공고 관리, 메시지 발송 등) |
| **round-member** | 평가 전용 웹 애플리케이션 (지원자 열람, 평가 작성, 면접 평가 등) |
| **평가 전용 모드 (Member-Only Mode)** | Admin/Manager 권한을 유지하되 round-member에만 접근 가능하도록 제한하는 설정 |
| **오퍼레이션 알림 (Operational Notifications)** | 지원자 등록, 평가 완료, 과제 제출 등 채용 운영 과정에서 발생하는 알림 |
| **감사 로그 (Audit Log)** | 권한 변경 등 보안 관련 이벤트 기록 |

### 14.2 참고 문서

1. **기존 리서치:** `/Users/terry/Terry's PM Note/Cursor-for-Product-Managers/initiatives/permission-custom/reference/reserch-permission-comparison.md`
2. **Draft PRD:** `/Users/terry/Terry's PM Note/Cursor-for-Product-Managers/initiatives/permission-custom/prd/draft-permission-prd.md`
3. **경쟁사 가이드:**
   - Ashby: `reference/guide-permission-ashby.md`
   - 그리팅: `reference/guide-permission-greething.md`
   - 나인하이어: `reference/guide-permission-ninehire.md`

### 14.3 FAQ (예상 질문)

**Q1. User 역할(일반 면접관)도 평가 전용 모드를 설정할 수 있나요?**
A1. 아니오. User 역할은 이미 기본적으로 round-member만 사용하므로, 평가 전용 모드 설정이 불필요합니다. 체크박스는 Admin/Manager에게만 활성화됩니다.

**Q2. 평가 전용 모드를 활성화하면 기존에 설정한 공고별 권한은 어떻게 되나요?**
A2. 공고별 권한(공고 관리자, 공고 매니저 등)은 그대로 유지됩니다. 다만 round-app에 접근할 수 없으므로, 공고 관리 기능은 사용할 수 없습니다. round-member에서는 Admin 권한 기반으로 모든 공고를 열람할 수 있습니다.

**Q3. 대표가 갑자기 채용 담당자 역할을 해야 한다면?**
A3. 다른 Admin이 조직 설정에서 평가 전용 모드 체크박스를 해제하면 즉시 round-app에 접근할 수 있습니다. 이 변경은 감사 로그에 기록됩니다.

**Q4. 평가 전용 모드 사용자도 지원자를 삭제할 수 있나요?**
A4. 아니오. 지원자 삭제는 round-app 전용 기능이므로 차단됩니다. round-member에서는 "삭제" 버튼이 표시되지 않습니다.

**Q5. 알림을 아예 안 받으면 중요한 정보를 놓칠 수 있지 않나요?**
A5. 베타 테스트에서 이 우려가 검증되면 Phase 1.5에서 "선택적 알림 설정"을 추가할 예정입니다 (예: "최종 합격 처리 시에만 알림 받기").

---

## 11. 승인 및 서명

| 역할 | 이름 | 승인 일자 | 서명 |
|------|------|----------|------|
| Product Manager | [PM 이름] | 2026-01-09 | _______ |
| Engineering Lead | [Tech Lead 이름] | | _______ |
| Design Lead | [Design Lead 이름] | | _______ |
| Head of Product | [VP 이름] | | _______ |

---

**문서 변경 이력:**

| 버전 | 일자 | 작성자 | 변경 내용 |
|------|------|--------|----------|
| v1.0.0 | 2026-01-09 | PM Team | 초안 작성 (옵션 3 기반 PRD) |

---

**다음 단계:**
1. [ ] 이해관계자 리뷰 (Engineering, Design, CS 팀)
2. [ ] 최종 승인 (Head of Product)
3. [ ] Jira/Linear에 Epic 및 Story 생성
4. [ ] 개발 착수 (Week 1 백엔드 작업 시작)
